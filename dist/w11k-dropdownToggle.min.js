/**
 * w11k-dropdownToggle - v1.0.2 - 2016-12-12
 * https://github.com/w11k/w11k-dropdownToggle
 *
 * Copyright (c) 2016 w11k GmbH
 */
"use strict";angular.module("w11k.dropdownToggle",[]),angular.module("w11k.dropdownToggle").directive("w11kDropdownToggle",["$document",function(a){var b,c=function(a){a.stopPropagation()};return{restrict:"A",controller:["$scope","$element",function(d,e){function f(a,b){var c={isPrevented:!1},e={prevent:function(){c.isPrevented=!0}};return angular.isFunction(a)&&(angular.isDefined(b)?d.$apply(function(){a(e)}):a(e)),c}function g(){e.parent().off("click",c),a.off("click",j),angular.isFunction(i)&&(i(),i=void 0)}var h=this;h.isOpen=!1;var i;h.shared={},h.open=function(g){var k=!0;if(b&&(k=b.close()),g&&(g.preventDefault(),g.stopPropagation()),h.isOpen===!1&&k){var l=f(h.shared.onOpen,g);l.isPrevented===!1&&(e.parent().addClass("open"),e.parent().on("click",c),a.on("click",j),i=d.$on("$locationChangeSuccess",function(){h.close()}),h.isOpen=!0,b=h)}return h.isOpen},h.toggle=function(){h.isOpen?h.close():h.open()};var j=function(){d.$apply(function(){h.close()})};h.close=function(a){if(h.isOpen){var c=f(h.shared.onClose,a);c.isPrevented===!1&&(e.parent().removeClass("open"),g(),h.isOpen=!1,b=null)}return!h.isOpen},d.$on("$destroy",function(){g()})}],link:function(a,b,c,d){function e(a){a.open=d.open,a.close=d.close,a.toggle=d.toggle,a.isOpen=function(){return d.isOpen}}var f=function(b){b.preventDefault(),b.stopPropagation(),a.$apply(function(){d.toggle()})};b.on("click",f),a.$on("$destroy",function(){b.off("click",f)}),c.$observe("w11kDropdownToggle",function(b){if(angular.isDefined(b)&&""!==b){var c=a.$eval(b);angular.isObject(c)&&(d.shared=c,e(c))}})}}}]);